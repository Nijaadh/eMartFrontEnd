<div class="dashboard-container p-4" data-aos="fade-in">
  <!-- Loading overlay -->
  <div *ngIf="loading" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    
  </div>

  <!-- Breadcrumb -->
  <div class="mb-6">
    <p-breadcrumb [model]="items" [home]="home"></p-breadcrumb>
  </div>

  <!-- Summary Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <!-- Total Items Card -->
    <div class="card shadow-lg rounded-xl overflow-hidden" data-aos="fade-up" data-aos-delay="100">
      <div class="bg-blue-600 p-4 flex justify-between items-center">
        <div class="text-white">
          <h3 class="text-lg font-semibold">Total Items</h3>
          <p class="text-sm opacity-80">In inventory</p>
        </div>
        <div class="bg-blue-500 rounded-full p-3">
          <i class="pi pi-box text-white text-xl"></i>
        </div>
      </div>
      <div class="p-4 bg-white">
        <h2 class="text-3xl font-bold text-gray-800">{{totalItems}}</h2>
      </div>
    </div>

    <!-- Items in Stock Card -->
    <div class="card shadow-lg rounded-xl overflow-hidden" data-aos="fade-up" data-aos-delay="200">
      <div class="bg-green-600 p-4 flex justify-between items-center">
        <div class="text-white">
          <h3 class="text-lg font-semibold">Items in Stock</h3>
          <p class="text-sm opacity-80">Available for sale</p>
        </div>
        <div class="bg-green-500 rounded-full p-3">
          <i class="pi pi-check-circle text-white text-xl"></i>
        </div>
      </div>
      <div class="p-4 bg-white">
        <h2 class="text-3xl font-bold text-gray-800">{{itemsInStock}}</h2>
      </div>
    </div>

    <!-- Today's Orders Card -->
    <div class="card shadow-lg rounded-xl overflow-hidden" data-aos="fade-up" data-aos-delay="300">
      <div class="bg-purple-600 p-4 flex justify-between items-center">
        <div class="text-white">
          <h3 class="text-lg font-semibold">Today's Orders</h3>
          <p class="text-sm opacity-80">New purchases</p>
        </div>
        <div class="bg-purple-500 rounded-full p-3">
          <i class="pi pi-shopping-cart text-white text-xl"></i>
        </div>
      </div>
      <div class="p-4 bg-white">
        <h2 class="text-3xl font-bold text-gray-800">{{todayOrders}}</h2>
      </div>
    </div>

    <!-- Today's Revenue Card -->
    <div class="card shadow-lg rounded-xl overflow-hidden" data-aos="fade-up" data-aos-delay="400">
      <div class="bg-amber-600 p-4 flex justify-between items-center">
        <div class="text-white">
          <h3 class="text-lg font-semibold">Today's Revenue</h3>
          <p class="text-sm opacity-80">Total sales amount</p>
        </div>
        <div class="bg-amber-500 rounded-full p-3">
          <i class="pi pi-dollar text-white text-xl"></i>
        </div>
      </div>
      <div class="p-4 bg-white">
        <h2 class="text-3xl font-bold text-gray-800">{{todayRevenue | currency:'LKR ':'symbol':'1.2-2'}}</h2>
      </div>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
    <!-- Orders by Status Chart -->
    <div class="bg-white p-6 rounded-xl shadow-lg" data-aos="zoom-in" data-aos-delay="100">
      <h3 class="text-lg font-semibold text-gray-800 mb-4">Orders by Status</h3>
      <p-chart type="doughnut" [data]="ordersByStatusData" [options]="chartOptions" height="300px"></p-chart>
    </div>

    <!-- Revenue by Month Chart -->
    <div class="bg-white p-6 rounded-xl shadow-lg" data-aos="zoom-in" data-aos-delay="200">
      <h3 class="text-lg font-semibold text-gray-800 mb-4">Revenue by Month</h3>
      <p-chart type="line" [data]="revenueByMonthData" height="300px"></p-chart>
    </div>
  </div>

  <!-- Low Stock Alerts -->
  <div class="bg-white p-6 rounded-xl shadow-lg mb-8" data-aos="fade-up">
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-lg font-semibold text-gray-800">Low Stock Alerts</h3>
      <p-button label="View All" icon="pi pi-external-link" styleClass="p-button-sm p-button-outlined"></p-button>
    </div>
    
    <p-table [value]="lowStockItems" [paginator]="true" [rows]="5" styleClass="p-datatable-sm" responsiveLayout="scroll">
      <ng-template pTemplate="header">
        <tr>
          <th>Item Name</th>
          <th>Category</th>
          <th>Current Stock</th>
          <th>Reorder Level</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item>
        <tr>
          <td>{{item.name}}</td>
          <td>{{item.category}}</td>
          <td>{{item.currentStock}}</td>
          <td>{{item.reorderLevel}}</td>
          <td>
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
                  [ngClass]="{'bg-red-100 text-red-800': item.currentStock === 0, 
                             'bg-yellow-100 text-yellow-800': item.currentStock > 0 && item.currentStock <= item.reorderLevel}">
              {{item.currentStock === 0 ? 'Out of Stock' : 'Low Stock'}}
            </span>
          </td>
          <td>
            <p-button icon="pi pi-refresh" styleClass="p-button-sm p-button-rounded p-button-info mr-2"></p-button>
            <p-button icon="pi pi-shopping-cart" styleClass="p-button-sm p-button-rounded p-button-success"></p-button>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="6" class="text-center p-4">No low stock items found.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>

<!-- Notification Toast -->
<p-toast position="bottom-right"></p-toast>