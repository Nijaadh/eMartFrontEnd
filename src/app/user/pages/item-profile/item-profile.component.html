<p-toast />
<div class="item-profile">
  <div class="item-card" *ngFor="let item of items">
    <!-- Product Image -->
    <div class="item-image">
      <img [src]="item.image" [alt]="item.image" width="100" class="shadow-4" />
      <!-- <img src="assets/sample-product.jpg" alt="Product Image" /> -->
    </div>

    <!-- Product Details -->
    <div class="item-info">
      <h1 class="title">{{ item.name }}</h1>

      <div class="brand-stock">
        <!-- <span class="brand">Brand: <strong>AudioPro</strong></span> -->
        <span
          class="stock available"
          [ngClass]="{
            available: item.itemCount > 0,
            unavailable: item.itemCount <= 0
          }"
          >{{ item.itemCount > 0 ? "âœ… In Stock" : "âŒ Out of Stock" }}</span
        >
      </div>

      <!-- <div class="price-highlight">
        <span class="price"
          >LKR
          {{
            item.discount > 0
              ? item.unitPrice - (item.unitPrice * item.discount) / 100
              : item.unitPrice
          }}</span
        >
        <span class="rating">â­ 4.7 (1,024 reviews)</span>
      </div> -->

      <div class="price-highlight">
        <div class="price-section">
          <span *ngIf="item.discount > 0" class="original-price">
            LKR {{ getOriginalPrice(item.unitPrice) }}
          </span>
          <span class="price">
            LKR {{ calculatePrice(item.unitPrice, item.discount) }}
          </span>
        </div>
      </div>

      <div class="sales-info">
        <span
          >Sold: <strong>{{ item.salesCount ?? 0 }}</strong></span
        >
        <span
          >Available: <strong>{{ item.itemCount ?? 0 }} units</strong></span
        >
      </div>

      <p class="description">
        {{ item.description }}
      </p>

      <!-- <ul class="features">
        <li>ğŸ”‹ 40-hour battery life</li>
        <li>ğŸ§ Active noise cancellation</li>
        <li>ğŸ¤ Built-in microphone</li>
        <li>ğŸ”Œ USB-C Fast Charging</li>
        <li>ğŸ“¶ Bluetooth 5.2</li>
      </ul> -->

      <div class="quantity">
        <label for="quantity">Quantity:</label>
        <input
          type="number"
          id="quantity"
          name="quantity"
          min="1"
          max="158"
          value="1"
        />
      </div>

      <div class="actions">
        <button class="btn primary">Buy</button>
        <button class="btn secondary" (click)="addToCart(item)">
          Add to Cart
        </button>
      </div>
    </div>
  </div>
</div>
