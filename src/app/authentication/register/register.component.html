<div class="flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-8 px-4 sm:px-6 lg:px-8">
    <div class="max-w-6xl w-full flex rounded-xl shadow-[0_20px_50px_rgba(8,_112,_184,_0.1)] overflow-hidden" data-aos="fade-up">
      <!-- Left side - Image with overlay -->
      <div class="hidden lg:block w-1/2 relative">
        <div class="absolute inset-0 bg-gradient-to-br from-primary-700/90 to-primary-900/90 z-10"></div>
        <img src="/assets/register.jpeg" alt="Registration" class="h-full w-full object-cover relative z-0" />
        <div class="absolute inset-0 flex flex-col justify-center items-center z-20 p-10 text-white" data-aos="fade-right" data-aos-delay="300">
          <div class="mb-6">
            <img src="/assets/blogo.png" alt="EMart.lk Logo" class="h-14 w-auto filter brightness-0 invert" />
          </div>
          <h1 class="text-3xl font-bold mb-3 text-center">Join EMart.lk Today</h1>
          <p class="text-base text-center mb-6 text-gray-100 max-w-md">Create your account and start enjoying our wide range of products and services.</p>
          <div class="flex space-x-4 mt-4">
            <div class="flex items-center">
              <i class="pi pi-check-circle text-lg mr-2"></i>
              <span>Free Shipping</span>
            </div>
            <div class="flex items-center">
              <i class="pi pi-check-circle text-lg mr-2"></i>
              <span>Easy Returns</span>
            </div>
          </div>
          <div class="flex space-x-4 mt-3">
            <div class="flex items-center">
              <i class="pi pi-check-circle text-lg mr-2"></i>
              <span>Exclusive Deals</span>
            </div>
            <div class="flex items-center">
              <i class="pi pi-check-circle text-lg mr-2"></i>
              <span>Loyalty Rewards</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Right side - Form -->
      <div class="w-full lg:w-1/2 bg-white p-6 lg:p-8">
        <div class="lg:hidden flex justify-center mb-6" data-aos="fade-down">
          <img src="/assets/blogo.png" alt="EMart.lk Logo" class="h-12 w-auto" />
        </div>
        
        <div class="mb-6" data-aos="fade-up" data-aos-delay="200">
          <h2 class="text-2xl font-bold text-gray-900">Create an Account</h2>
          <p class="mt-2 text-gray-600 text-sm">Fill in your details to get started with EMart.lk</p>
        </div>
        
        <form (ngSubmit)="register()" class="space-y-4" data-aos="fade-up" data-aos-delay="300">
          <div class="flex flex-col md:flex-row gap-4 items-start">
            <!-- Username field -->
            <div class="w-full md:w-2/3">
              <label for="userName" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
              <div class="relative">
                <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500">
                  <i class="pi pi-user"></i>
                </span>
                <input
                  id="userName"
                  [(ngModel)]="user.userName"
                  name="userName"
                  (ngModelChange)="onUserNameChange()"
                  pInputText
                  autocomplete="off"
                  class="w-full pl-10 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200"
                  placeholder="Choose a username"
                  required
                />
              </div>
              <small *ngIf="unameExists" class="text-red-500 text-xs mt-1 flex items-center">
                <i class="pi pi-exclamation-circle mr-1"></i> Username already taken
              </small>
            </div>
            
            <!-- Profile Image Upload -->
            <div class="w-full md:w-1/3 flex flex-col items-center">
              <label class="block text-sm font-medium text-gray-700 mb-1 text-center w-full">Profile Image</label>
              <div class="profile-upload">
                <label for="file-input" class="cursor-pointer">
                  <div *ngIf="imagePreviewUrl" class="profile-preview">
                    <img [src]="imagePreviewUrl" alt="Profile Preview" class="h-full w-full object-cover" />
                  </div>
                  <div *ngIf="!imagePreviewUrl" class="profile-placeholder">
                    <i class="pi pi-camera text-lg"></i>
                  </div>
                </label>
                <input id="file-input" type="file" (change)="onImageSelected($event)" accept="image/*" class="hidden" />
              </div>
            </div>
          </div>
          
          <!-- Address field -->
          <div>
            <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Address</label>
            <div class="relative">
              <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500">
                <i class="pi pi-map-marker"></i>
              </span>
              <input
                id="address"
                [(ngModel)]="user.address"
                name="address"
                pInputText
                class="w-full pl-10 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200"
                placeholder="Your address"
              />
            </div>
          </div>
          
          <!-- Email field -->
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
            <div class="relative">
              <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500">
                <i class="pi pi-envelope"></i>
              </span>
              <input
                id="email"
                [(ngModel)]="user.email"
                name="email"
                (ngModelChange)="onEmailChange()"
                pInputText
                type="email"
                class="w-full pl-10 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200"
                placeholder="Your email address"
                required
              />
            </div>
            <small *ngIf="emailExists" class="text-red-500 text-xs mt-1 flex items-center">
              <i class="pi pi-exclamation-circle mr-1"></i> Email already in use
            </small>
          </div>
          
          <!-- Telephone field -->
          <div>
            <label for="tel" class="block text-sm font-medium text-gray-700 mb-1">Telephone</label>
            <div class="relative">
              <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500 z-10">
                <i class="pi pi-phone"></i>
              </span>
              <input
                id="tel"
                [(ngModel)]="user.tel"
                name="tel"
                pInputText
                class="w-full pl-10 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200"
                placeholder="07XXXXXXXX or +947XXXXXXXX"
                [pattern]="phonePattern"
                #phoneInput="ngModel"
              />
            </div>
            <small *ngIf="phoneInput.invalid && (phoneInput.dirty || phoneInput.touched)" class="text-red-500 text-xs mt-1 flex items-center">
              <i class="pi pi-exclamation-circle mr-1"></i> Please enter a valid phone number (07XXXXXXXX or +947XXXXXXXX)
            </small>
          </div>
          
          <!-- Password field -->
          <div>
            <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
            <div class="relative">
              <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500 z-10">
                <i class="pi pi-lock"></i>
              </span>
              <p-password
                id="password"
                [(ngModel)]="user.password"
                name="password"
                [toggleMask]="true"
                [feedback]="true"
                styleClass="w-full"
                inputStyleClass="w-full pl-10 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200"
                placeholder="Create a password"
                required
              ></p-password>
            </div>
          </div>
          
          <!-- Terms and conditions -->
          <div class="flex items-center">
            <p-checkbox [(ngModel)]="termsAccepted" [binary]="true" inputId="terms" name="terms" styleClass="mr-2"></p-checkbox>
            <label for="terms" class="text-xs text-gray-700">
              I agree to the <a href="#" class="text-primary-600 hover:text-primary-500">Terms of Service</a> and <a href="#" class="text-primary-600 hover:text-primary-500">Privacy Policy</a>
            </label>
          </div>
          
          <!-- Submit button -->
          <div class="pt-1">
            <p-button
              type="submit"
              styleClass="w-full p-button-primary shadow-lg"
              [style]="{'height': '40px'}"
              label="Create Account"
              [loading]="loading"
              [disabled]="emailExists || unameExists || !termsAccepted || phoneInput.invalid"
            ></p-button>
          </div>
        </form>
        
        <div class="mt-4 text-center" data-aos="fade-up" data-aos-delay="400">
          <p class="text-gray-600 text-sm">
            Already have an account?
            <a routerLink="/login" class="font-semibold text-primary-600 hover:text-primary-500 transition-colors duration-200 ml-1">
              Sign in
            </a>
          </p>
        </div>
        
        <div class="mt-4 pt-4 border-t border-gray-200 text-center" data-aos="fade-up" data-aos-delay="500">
          <a routerLink="/home" class="inline-flex items-center text-primary-800 font-semibold hover:text-primary-600 transition-colors duration-200 text-xs">
            <img src="/assets/blogo.png" alt="EMart.lk Logo" class="h-5 w-auto mr-2" />
            <span>Â© 2023 EMart.lk. All rights reserved.</span>
          </a>
        </div>
      </div>
    </div>
  </div>
  
  <p-toast position="top-right"></p-toast>
  